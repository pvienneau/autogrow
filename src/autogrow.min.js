/*
  Autogrow 1.2.1
  license: MIT
  https://github.com/pvienneau/autogrow
*/
Autogrow=function(e,t){var r=this;t=t||{};var o={minRows:1,maxRows:!1,scrollOnOverflow:!0},n=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},i=function(e){return e?("undefined"!=typeof e.minRows&&(e.minRows=Math.max(1,e.minRows)),e):{}};return"undefined"==typeof e||"textarea"!==e.tagName.toLowerCase()?console.warn("You must define a textarea to deploy the autogrow onto."):(r.elements={textarea:e},r.options=n(o,i(t)),r.update(!0),r)},Autogrow.prototype.update=function(e){var t=this;return"undefined"==typeof e&&(e=!1),e&&(t.createMirror(),t.registerEventListeners(),t.updateTextareaRowCount()),!0},Autogrow.prototype.createMirror=function(){var e=this,t=window.getComputedStyle(e.elements.textarea,null),r=parseInt(e.elements.textarea.offsetWidth,10)-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)-parseInt(t.borderLeftWidth,10)-parseInt(t.borderRightWidth,10)+"px",o={overflowY:"hidden",overflowX:"hidden",height:"auto",textRendering:"optimizeSpeed",display:t.display},n={visibility:"hidden",position:"absolute",zIndex:-1,width:r,left:"-9999px",top:"-9999px"},i=["fontFamily","fontSize","fontWeight","fontStyle","fontVariant","fontStretch","letterSpacing","lineHeight","textTransform","wordSpacing","wordBreak","letterSpacing","textIndent","whiteSpace","wordWrap","paddingRight","paddingLeft","borderRightWidth","borderRightStyle","borderLeftWidth","borderLeftStyle"];e.destroyMirror(),e.elements.mirror=document.createElement("div");for(property in o)e.elements.textarea.style[property]=o[property],e.elements.mirror.style[property]=o[property];for(property in n)e.elements.mirror.style[property]=n[property];return i.forEach(function(r){e.elements.mirror.style[r]=t[r],e.elements.textarea.style[r]=t[r]}),e.elements.textarea.rows=e.options.minRows,e.options.rowHeight=parseInt(e.elements.mirror.style.lineHeight,10),e.elements.mirror.style.minHeight=(e.options.minHeight||parseInt(t.minHeight,10)||parseInt(t.height,10)||parseInt(e.elements.mirror.style.lineHeight,10))+"px",document.body.appendChild(e.elements.mirror),!0},Autogrow.prototype.destroyMirror=function(){var e=this;return e.elements.mirror?(e.elements.mirror.parentNode.removeChild(e.elements.mirror),delete e.elements.mirror,!0):!1},Autogrow.prototype.registerEventListeners=function(){var e=this;return e.unregisterEventListeners(),e.elements.textarea.addEventListener("keydown",function(t){e.keyDownHandler(t)}),e.elements.textarea.addEventListener("input",function(t){e.keyPressHandler(t)}),!0},Autogrow.prototype.unregisterEventListeners=function(){var e=this;return e.elements.textarea.removeEventListener("keydown",function(t){e.keyDownHandler(t)}),e.elements.textarea.removeEventListener("input",function(t){e.keyPressHandler(t)}),!0},Autogrow.prototype.keyDownHandler=function(e){var t=this;t.options.scrollOnOverflow||t.elements.textarea.rows!=t.options.maxRows||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||!/^U\+\d{3}\w$/.test(e.keyIdentifier)||(t.copyTextToMirror("W"),t.elements.textarea.rows!=t.getTextareaCalculatedRows(!1)&&e.preventDefault())},Autogrow.prototype.keyPressHandler=function(){var e=this;e.updateTextareaRowCount()},Autogrow.prototype.updateTextareaRowCount=function(e){var t=this,r=t.elements.textarea.rows;t.copyTextToMirror(e);var o=t.getTextareaCalculatedRows();return t.elements.textarea.style.overflowY=o>=t.options.maxRows&&t.options.scrollOnOverflow?"auto":"hidden",r!=o&&(t.elements.textarea.rows=o,t.throwEvent("rowChange",t.elements.textarea)),!0},Autogrow.prototype.copyTextToMirror=function(e){var t=this,r=t.elements.textarea.value;return e=e||"",t.elements.mirror.innerHTML=r+e,!0},Autogrow.prototype.getTextareaCalculatedRows=function(e){var t=this;"undefined"==typeof e&&(e=!0);var r,r,o=parseInt(t.elements.mirror.style.minHeight,10);return o=Math.max(parseInt(t.elements.mirror.clientHeight,10),parseInt(o,10)),r=o/t.options.rowHeight,e&&(r=Math.max(t.options.minRows,r),t.options.maxRows&&(r=Math.min(t.options.maxRows,r))),r},Autogrow.prototype.throwEvent=function(e,t){return"undefined"==typeof e||"undefined"==typeof t?!1:void t.dispatchEvent(new Event(e))},function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++){var r=e[t];r.dataset.autogrow&&new Autogrow(r)}}();