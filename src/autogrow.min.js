/*
  Autogrow 1.2.4
  license: MIT
  https://github.com/pvienneau/autogrow
*/
Autogrow=function(e,t){var r=this;t=t||{};var o={minRows:1,maxRows:!1,scrollOnOverflow:!0},n=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},i=function(e){return e?("undefined"!=typeof e.minRows&&(e.minRows=Math.max(1,e.minRows)),e):{}};return"undefined"==typeof e||"textarea"!==e.tagName.toLowerCase()?console.warn("You must define a textarea to deploy the autogrow onto."):(r.elements={textarea:e},r.options=n(o,i(t)),r.options.defaultAttributes={rows:r.elements.textarea.getAttribute("rows"),style:r.elements.textarea.getAttribute("style")},r.update(!0),r)},Autogrow.prototype.update=function(e){var t=this;return"undefined"==typeof e&&(e=!1),t.createMirror(),e&&t.registerEventListeners(),t.keyPressHandler(),!0},Autogrow.prototype.createMirror=function(){var e=this,t=window.getComputedStyle(e.elements.textarea,null),r=e.getUserAgent(),o={iOS:{paddingLeft:"3px",paddingRight:"3px"},IE:{paddingRight:"2px"}},n=parseInt(e.elements.textarea.offsetWidth,10)-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)-parseInt(t.borderLeftWidth,10)-parseInt(t.borderRightWidth,10)-(o[r]&&o[r].paddingLeft?parseInt(o[r].paddingLeft,10):0)-(o[r]&&o[r].paddingRight?parseInt(o[r].paddingRight,10):0)+"px",i={overflowY:"hidden",overflowX:"hidden",height:"auto",textRendering:"optimizeSpeed",display:t.display},a={visibility:"hidden",position:"absolute",zIndex:-1,width:n,left:"-9999px",top:"-9999px"},s=["fontFamily","fontSize","fontWeight","fontStyle","fontVariant","fontStretch","letterSpacing","lineHeight","textTransform","wordSpacing","wordBreak","letterSpacing","textIndent","whiteSpace","wordWrap","paddingRight","paddingLeft","borderRightWidth","borderRightStyle","borderLeftWidth","borderLeftStyle"];e.destroyMirror(),e.elements.mirror=document.createElement("div");for(property in i)e.elements.textarea.style[property]=i[property],e.elements.mirror.style[property]=i[property];for(property in a)e.elements.mirror.style[property]=a[property];s.forEach(function(r){e.elements.mirror.style[r]=t[r],e.elements.textarea.style[r]=t[r]});for(property in o[r])e.elements.mirror.style[property]=parseInt(e.elements.mirror.style[property],10)+parseInt(o[r][property],10)+(o[r][property].indexOf("px")?"px":"");return e.elements.textarea.rows=e.options.minRows,e.options.rowHeight=parseInt(e.elements.mirror.style.lineHeight,10),e.elements.mirror.style.minHeight=(e.options.minHeight||parseInt(t.minHeight,10)||parseInt(t.height,10)||parseInt(e.elements.mirror.style.lineHeight,10))+"px",document.body.appendChild(e.elements.mirror),!0},Autogrow.prototype.getUserAgent=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)?"iOS":/Edge\/|Trident\/|MSIE /.test(navigator.userAgent)?"IE":!1},Autogrow.prototype.destroyMirror=function(){var e=this;return e.elements.mirror?(e.elements.mirror.parentNode.removeChild(e.elements.mirror),delete e.elements.mirror,!0):!1},Autogrow.prototype.registerEventListeners=function(){var e=this;return e.unregisterEventListeners(),e.elements.textarea.addEventListener("keydown",function(t){e.keyDownHandler(t)}),e.elements.textarea.addEventListener("input",function(t){e.keyPressHandler(t)}),!0},Autogrow.prototype.unregisterEventListeners=function(){var e=this;return e.elements.textarea.removeEventListener("keydown",function(t){e.keyDownHandler(t)}),e.elements.textarea.removeEventListener("input",function(t){e.keyPressHandler(t)}),!0},Autogrow.prototype.keyDownHandler=function(e){var t=this;(t.options.scrollOnOverflow||t.elements.textarea.rows!=t.options.maxRows||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||!/^U\+\d{3}\w$/.test(e.keyIdentifier))&&13!=e.which||8==e.which||46==e.which||(t.copyTextToMirror("W"),(t.getTextareaCalculatedRows(!1)>t.elements.textarea.rows||t.getTextareaCalculatedRows(!1)>=t.options.maxRows&&13==e.which)&&e.preventDefault())},Autogrow.prototype.keyPressHandler=function(){var e=this;e.updateTextareaRowCount()},Autogrow.prototype.updateTextareaRowCount=function(e){var t=this,r=t.elements.textarea.rows;t.copyTextToMirror(e);var o=t.getTextareaCalculatedRows();return t.elements.textarea.style.overflowY=t.options.maxRows&&o>=t.options.maxRows&&t.options.scrollOnOverflow?"auto":"hidden",r!=o&&(t.elements.textarea.rows=o,t.throwEvent("rowChange",t.elements.textarea)),!0},Autogrow.prototype.copyTextToMirror=function(e){var t=this,r=t.elements.textarea.value;return e=e||"",r.match(/\n$/)&&(r+="."),t.writeToMirror(r+e),!0},Autogrow.prototype.writeToMirror=function(e){var t=this;return e=e||"",t.elements.mirror.innerHTML=e,e},Autogrow.prototype.getTextareaCalculatedRows=function(e){var t=this;"undefined"==typeof e&&(e=!0);var r,r,o=parseInt(t.elements.mirror.style.minHeight,10);return o=Math.max(parseInt(t.elements.mirror.clientHeight,10),parseInt(o,10)),r=o/t.options.rowHeight,e&&(r=Math.max(t.options.minRows,r),t.options.maxRows&&(r>t.options.maxRows&&!t.options.scrollOnOverflow&&t.trimTextareaValue(t.options.maxRows),r=Math.min(t.options.maxRows,r))),r},Autogrow.prototype.trimTextareaValue=function(e){var t=this;if(e=e||t.options.maxRows||t.options.minRows||!1,!e)return!1;for(var r=t.elements.textarea.value;t.getTextareaCalculatedRows(!1)>e;)r=r.substring(0,r.length-1),t.writeToMirror(r);t.elements.textarea.value=r},Autogrow.prototype.throwEvent=function(e,t){if("undefined"==typeof e||"undefined"==typeof t)return!1;var r=document.createEvent("customEvent");r.initCustomEvent(e,!0,!1,{}),t.dispatchEvent(r)},Autogrow.prototype.destroy=function(){var e=this;e.destroyMirror(),e.elements.textarea.removeAttribute("style"),e.elements.textarea.removeAttribute("rows");for(attribute in e.options.defaultAttributes)e.options.defaultAttributes[attribute]&&e.elements.textarea.setAttribute(attribute,e.options.defaultAttributes[attribute])},function(){for(var e=document.querySelectorAll('textarea[data-autogrow="true"]'),t=0;t<e.length;t++){var r=e[t];r.dataset.autogrow&&new Autogrow(r)}}();