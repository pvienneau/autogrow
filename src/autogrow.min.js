/*
  Autogrow 2.0.1
  license: MIT
  https://github.com/pvienneau/autogrow
*/
var Autogrow=function(){function e(e,o){var a=this;window.jQuery&&e instanceof jQuery&&(e=e.get(0)),e&&t(e,"textarea")||console.warn("Autogrow: You must define a textarea in order to deploy."),o=o||{},a.elements={textarea:e,mirror:null};var i={minRows:1,maxRows:!1,debug:!0,callbacks:{}};a.options=r(i,o),a.options.minRows=Math.max(1,a.options.minRows),a.options.maxRows<0&&(a.options.maxRows=!1),a.attributes={rows:""};for(var s=0;s<a.elements.textarea.attributes.length;s++)a.attributes[a.elements.textarea.attributes[s].name]=a.elements.textarea.attributes[s].value;return a.reInit(),n.call(a,"create"),a.elements.textarea.data||(a.elements.textarea.data={}),a.elements.textarea.data.autogrow=a,a}var t=function(e,t){return e&&e.tagName.toLowerCase()==t.toLowerCase()},r=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},n=function(e){var t=this;if(!e)return!1;var r=document.createEvent("customEvent"),n=!0;return r.initEvent(e.toLowerCase(),!0,!1,{}),t.options.callbacks[e]&&(n=t.options.callbacks[e].call(t)),n&&t.elements.textarea.dispatchEvent(r),n},o=function(){var e=this;return a.call(e),e.elements.textarea.addEventListener("keydown",function(t){return s.call(e,t)}),e.elements.textarea.addEventListener("input",function(t){return i.call(e,t)}),!0},a=function(){var e=this;return e.elements.textarea.removeEventListener("keydown",function(t){return s.call(e,t)}),e.elements.textarea.removeEventListener("input",function(t){return i.call(e,t)}),!0},i=function(){var e=this;e.update()},s=function(e){return!1},l=function(){var e=this;return p.call(e),e.elements.mirror=document.createElement("div"),e.elements.mirror.rows=e.options.minRows,document.body.appendChild(e.elements.mirror),!0},p=function(){var e=this;return e.elements.mirror?(e.elements.mirror.parentNode.removeChild(e.elements.mirror),delete e.elements.mirror,!0):!1},d=function(){var e=this;if(!e.elements.mirror)return!1;var t=window.getComputedStyle(e.elements.textarea,null),r=c(),n={iOS:{paddingLeft:3,paddingRight:3},IE:{paddingRight:2}};e.elements.mirror.removeAttribute("style");var o=parseInt(e.elements.textarea.offsetWidth,10)-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)-parseInt(t.borderLeftWidth,10)-parseInt(t.borderRightWidth,10)-(n[r]&&n[r].paddingLeft?n[r].paddingLeft:0)-(n[r]&&n[r].paddingRight?n[r].paddingRight:0)+"px",a={overflowY:"hidden",overflowX:"hidden",height:"auto",textRendering:"optimizeSpeed"},i={resize:"none"},s={visibility:"hidden",position:"absolute",zIndex:-1,width:o,left:"-9999px",top:"-9999px"},l=["fontFamily","fontSize","fontWeight","fontStyle","fontVariant","fontStretch","letterSpacing","lineHeight","textTransform","wordSpacing","wordBreak","letterSpacing","textIndent","whiteSpace","wordWrap","paddingTop","paddingRight","paddingBottom","paddingLeft","borderRightWidth","borderRightStyle","borderLeftWidth","borderLeftStyle"];t.lineHeight.match(/^\d+px$/)||(e.elements.textarea.style.lineHeight=1.2*parseInt(t.fontSize,10)+"px",t=window.getComputedStyle(e.elements.textarea,null));for(property in a)e.elements.textarea.style[property]=a[property],e.elements.mirror.style[property]=a[property];for(property in i)e.elements.textarea.style[property]=i[property];for(property in s)e.elements.mirror.style[property]=s[property];l.forEach(function(r){e.elements.mirror.style[r]=t[r],e.elements.textarea.style[r]=t[r]});for(property in n[r])e.elements.mirror.style[property]=parseInt(e.elements.mirror.style[property],10)+parseInt(n[r][property],10)+(e.elements.mirror.style[property].indexOf("px")?"px":"");return e.data.rowHeight=parseInt(e.elements.mirror.style.lineHeight,10),e.elements.mirror.style.minHeight=e.options.minRows*e.data.rowHeight+"px",e.options.debug&&m.call(e),!0},u=function(e,t){t=t||"top";var r=0;t=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();do isNaN(e["offset"+t])||(r+=e["offset"+t]);while(e=e.offsetParent);return r},m=function(){var e=this,t={visibility:"visible",position:"absolute",zIndex:1,left:u(e.elements.textarea,"left")+e.elements.textarea.offsetWidth+10+"px",top:u(e.elements.textarea,"top")+"px",border:"1px solid #7396FF",color:"#7396FF",opacity:.5};for(style in t)e.elements.mirror.style[style]=t[style]},c=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)?"ios":/Edge\/|Trident\/|MSIE /.test(navigator.userAgent)?"ie":!1},h=function(e){var t=this,r=t.elements.textarea.value;e=e||"",r.match(/\n$/)&&(r+="."),t.elements.mirror.innerHTML=r+e},f=function(){var e,t=this,r=parseInt(t.elements.mirror.style.minHeight,10);return r=Math.max(parseInt(t.elements.mirror.clientHeight,10),parseInt(r,10)),e=r/t.data.rowHeight,Math.round(e)};return e.prototype.reInit=function(){var e=this;return e.destroy(),e.data={},l.call(e),o.call(e),e.refresh(),e.update(!0),!0},e.prototype.destroy=function(){var e=this;a.call(e),delete e.data,p.call(e),e.elements.textarea.removeAttribute("style");for(attribute in e.attributes)e.elements.textarea[attribute]=e.attributes[attribute];return!0},e.prototype.refresh=function(){var e=this;return d.call(e),n.call(e,"refresh"),!0},e.prototype.update=function(e){var t=this,r=t.getRowCount(),o=0;return e=e||!1,h.call(t),o=f.call(t),r!=o&&(t.setRowCount(o),e||n.call(t,"rowChange")),!0},e.prototype.getRowCount=function(){var e=this;return e.elements.textarea.rows},e.prototype.setRowCount=function(e){var t=this,e=e||t.elements.textarea.rows;return t.elements.textarea.rows=e,!0},e.prototype.getLastLine=function(){var e=this,t=e.elements.textarea.value,r=e.elements.mirror.cloneNode(!0);r.innerHTML="W",document.body.appendChild(r);for(var n=window.getComputedStyle(r,null),o=parseInt(n.height,10),a="",i=0;i<t.length;i++)r.innerHTML=a+t[i],n=window.getComputedStyle(r,null),parseInt(n.height,10)>o&&(i=t.substr(0,i).lastIndexOf(" ")+1,a=""),a+=t[i];return r.parentNode.removeChild(r),delete r,a.replace(/^(\s)*/g,"")},e.prototype.getLastLineWidth=function(){var e=this,t=(e.elements.textarea.value,e.elements.mirror.cloneNode(!0));document.body.appendChild(t),t.innerHTML=e.getLastLine(),t.style.width="auto";var r=window.getComputedStyle(t,null),n=parseInt(r.width),o=parseInt(r.paddingLeft);return t.parentNode.removeChild(t),delete n,parseInt(n+o,10)},e}();!function(){for(var e=document.querySelectorAll('textarea[data-autogrow="true"]'),t=0;t<e.length;t++){var r=e[t];new Autogrow(r)}}();